<%- include('../partials/head', {webtitle: "Editar productos"}) %>

<header>
  <nav>
    <div class="left-section">
      <a href="/"><img src="/images/LogoTIF.png" alt="logo"></a>
    </div>
    <div class="responsive-menu">
      <div class="hamburguer-menu">
        <a href="#modal-menu"><i class="fa-solid fa-bars"></i></a>       
      </div>
      <a class="cart" href="/products/cart"><i class="fas fa-solid fa-cart-shopping"></i></a>
      </div>
      
      <div class="nav-items">
        <ul>
          <% if (locals.isLogged) { %>
            <li><a href="/">Inicio</a></li>
            <li><a href="/products/products-list/Hogar">Tienda</a></li>
            <li>
              <li><a href="/users/logout">Cerrar sesión</a></li>
            </li>
            <a class="cart" href="/cart"><i class="fas fa-solid fa-cart-shopping"><span id="cart-count">0</span></i></a>
            <% switch (locals.isLogged.rol_id) {
              case 1:
            %>
            <a class = "btn-adminProduct1" href="/products/adminProductUser"><input type="button" value="Administrar"></a>
            <a class = "btn-adminProduct1" href="/cart/sell"><input type="button" value="Vender"></a>
            <%
                break;
              case 2:
            %>
            <a class = "btn-adminProduct1" href="/cart/sell"><input type="button" value="Vender"></a>
            <%
                break;
              default:
            %>
              
            <%
                break;
            } %>
              <li><a href="/users/profile"> <img class="image-locals" src="/images/users/<%= isLogged.image %>" alt="img perfil"></a></li>
            </a>
            <% } else { %>
            <li><a href="/">Inicio</a></li>
          <li><a href="/products/products-list/Hogar">Tienda</a></li>
          <li><a class="red" href="/users/login">Iniciar sesión</a></li>
          <li><a <% if (locals.isLogged && locals.isLogged.rol_id == 1) { %> <%=href="/users/register" %><% } else {%> <%= 'href=/users/clientRegister' %> <% }; %> >Registrate</a></li>
          <a class="cart" href="/cart"><i class="fas fa-solid fa-cart-shopping"><span id="cart-count">0</span></i></a>
          <a class = "btn-adminProduct2" href="/addeditProduct">
          <input type="button" value="Administrar">
          <% } %>
          </a>
      </ul> 
    </div>
  </nav>
  <script>
    function updateCartCount() {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      document.querySelector('#cart-count').textContent = cart.length;
    }
    window.addEventListener('load', updateCartCount);
  </script>
</header>
